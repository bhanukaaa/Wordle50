<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link
      crossorigin="anonymous"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      rel="stylesheet"
    />
    <script
      crossorigin="anonymous"
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    ></script>

    <link href="../assets/favicon.png" rel="icon" />
    <link href="../assets/styles.css" rel="stylesheet" />

    <title>Wordle</title>
  </head>

  <body>
    <nav class="bg-light border navbar navbar-expand-md navbar-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="../index.html">
          <img src="../assets/wordle50logo2.png" width="150px" />
        </a>
        <button
          aria-controls="navbar"
          aria-expanded="false"
          aria-label="Toggle navigation"
          class="navbar-toggler"
          data-bs-target="#navbar"
          data-bs-toggle="collapse"
          type="button"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbar">
          <ul class="navbar-nav me-auto mt-2">
            <li class="nav-item">
              <a class="nav-link" href="play4.html">Play 4 Letters</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../five/play5.html">Play 5 Letters</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../six/play6.html">Play 6 Letters</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <main class="container py-5 text-center">
      <a href="../index.html">
        <img src="../assets/wordle50logo.png" width="300px" />
      </a>
      <br />
      <br />
      <p>Enter any valid word and press Enter</p>
      <div id="wordle"></div>
      <script>
        // All JavaScript code moved here due to ES6 limitations
        const dictionary = [
          "able",
          "acid",
          "aged",
          "also",
          "area",
          "army",
          "atom",
          "away",
          "baby",
          "back",
          "ball",
          "band",
          "bank",
          "base",
          "bath",
          "beam",
          "bear",
          "beat",
          "been",
          "beer",
          "bell",
          "belt",
          "best",
          "bill",
          "bird",
          "bite",
          "blog",
          "blow",
          "blue",
          "boat",
          "body",
          "bomb",
          "bond",
          "bone",
          "book",
          "boom",
          "born",
          "boss",
          "both",
          "bowl",
          "bulk",
          "burn",
          "bush",
          "busy",
          "byte",
          "cake",
          "call",
          "calm",
          "came",
          "camp",
          "card",
          "care",
          "case",
          "cash",
          "cast",
          "cell",
          "chat",
          "chip",
          "city",
          "clay",
          "club",
          "coal",
          "coat",
          "code",
          "cold",
          "come",
          "cook",
          "cool",
          "cope",
          "core",
          "cost",
          "crew",
          "crop",
          "dark",
          "data",
          "date",
          "dawn",
          "dead",
          "deal",
          "dear",
          "debt",
          "deep",
          "deny",
          "desk",
          "dial",
          "dice",
          "dirt",
          "disk",
          "dive",
          "does",
          "done",
          "door",
          "dose",
          "down",
          "draw",
          "drew",
          "drop",
          "drug",
          "dual",
          "duck",
          "dust",
          "duty",
          "each",
          "earn",
          "ease",
          "east",
          "easy",
          "edge",
          "else",
          "emit",
          "ends",
          "even",
          "ever",
          "evil",
          "exit",
          "face",
          "fact",
          "fade",
          "fail",
          "fair",
          "fall",
          "farm",
          "fast",
          "fate",
          "fear",
          "feed",
          "feel",
          "feet",
          "fell",
          "felt",
          "file",
          "fill",
          "film",
          "find",
          "fine",
          "fire",
          "firm",
          "fish",
          "five",
          "flat",
          "flow",
          "food",
          "foot",
          "ford",
          "form",
          "fort",
          "four",
          "free",
          "from",
          "fuel",
          "full",
          "fund",
          "gain",
          "game",
          "gang",
          "gate",
          "gave",
          "gear",
          "gene",
          "gift",
          "girl",
          "give",
          "glad",
          "goal",
          "goes",
          "gold",
          "gone",
          "good",
          "grab",
          "gray",
          "grew",
          "grey",
          "grow",
          "gulf",
          "hair",
          "half",
          "hall",
          "hand",
          "hang",
          "hard",
          "harm",
          "hate",
          "have",
          "head",
          "hear",
          "heat",
          "held",
          "hell",
          "help",
          "here",
          "hero",
          "hide",
          "high",
          "hill",
          "hire",
          "hold",
          "hole",
          "holy",
          "home",
          "hope",
          "host",
          "hour",
          "huge",
          "hung",
          "hunt",
          "hurt",
          "idea",
          "inch",
          "into",
          "iron",
          "item",
          "jack",
          "jane",
          "jean",
          "john",
          "join",
          "joke",
          "jump",
          "jury",
          "just",
          "keep",
          "kept",
          "kick",
          "kill",
          "kind",
          "king",
          "knee",
          "knew",
          "know",
          "lack",
          "lady",
          "laid",
          "lake",
          "land",
          "lane",
          "last",
          "late",
          "lead",
          "left",
          "less",
          "life",
          "lift",
          "like",
          "line",
          "link",
          "list",
          "live",
          "load",
          "loan",
          "lock",
          "logo",
          "long",
          "look",
          "loop",
          "lose",
          "loss",
          "lost",
          "loud",
          "love",
          "luck",
          "made",
          "mail",
          "main",
          "make",
          "male",
          "many",
          "mark",
          "mass",
          "mate",
          "meal",
          "mean",
          "meat",
          "meet",
          "menu",
          "mere",
          "mice",
          "milk",
          "mind",
          "mine",
          "miss",
          "mode",
          "mood",
          "moon",
          "more",
          "most",
          "move",
          "much",
          "must",
          "name",
          "navy",
          "near",
          "neck",
          "need",
          "news",
          "next",
          "nice",
          "nick",
          "nine",
          "none",
          "noon",
          "nor",
          "nose",
          "note",
          "noun",
          "okay",
          "once",
          "only",
          "onto",
          "open",
          "oral",
          "over",
          "pace",
          "pack",
          "page",
          "paid",
          "pain",
          "pair",
          "palm",
          "part",
          "pass",
          "past",
          "path",
          "peak",
          "peer",
          "pick",
          "pile",
          "pink",
          "pipe",
          "plan",
          "play",
          "plot",
          "plug",
          "plus",
          "poem",
          "poet",
          "poll",
          "pond",
          "pool",
          "poor",
          "port",
          "pork",
          "post",
          "pour",
          "pull",
          "pure",
          "push",
          "race",
          "rack",
          "rail",
          "rain",
          "rank",
          "rare",
          "rate",
          "read",
          "real",
          "rear",
          "reed",
          "reel",
          "rely",
          "rent",
          "rest",
          "rice",
          "rich",
          "ride",
          "ring",
          "rise",
          "risk",
          "road",
          "rock",
          "role",
          "roll",
          "roof",
          "room",
          "root",
          "rose",
          "rule",
          "rush",
          "safe",
          "said",
          "sail",
          "sake",
          "sale",
          "salt",
          "same",
          "sand",
          "save",
          "seat",
          "seed",
          "seek",
          "seem",
          "seen",
          "self",
          "sell",
          "send",
          "sent",
          "sept",
          "sets",
          "ship",
          "shoe",
          "shop",
          "shot",
          "show",
          "shut",
          "sick",
          "side",
          "sign",
          "site",
          "size",
          "skin",
          "slip",
          "slow",
          "snap",
          "snow",
          "soft",
          "soil",
          "sold",
          "sole",
          "some",
          "song",
          "soon",
          "sore",
          "sort",
          "soul",
          "sour",
          "spot",
          "star",
          "stay",
          "step",
          "stop",
          "such",
          "suit",
          "sure",
          "swap",
          "swim",
          "tale",
          "talk",
          "tall",
          "tank",
          "task",
          "team",
          "tech",
          "tell",
          "tend",
          "term",
          "test",
          "text",
          "than",
          "that",
          "then",
          "they",
          "thin",
          "this",
          "thus",
          "tide",
          "till",
          "time",
          "tiny",
          "tire",
          "tone",
          "tool",
          "town",
          "trap",
          "tree",
          "trip",
          "true",
          "tube",
          "tune",
          "turn",
          "twin",
          "type",
          "unit",
          "upon",
          "used",
          "user",
          "vary",
          "vast",
          "very",
          "vice",
          "view",
          "vote",
          "wage",
          "wait",
          "wake",
          "walk",
          "wall",
          "want",
          "ward",
          "warm",
          "warn",
          "wash",
          "watt",
          "wave",
          "weak",
          "wear",
          "week",
          "well",
          "went",
          "were",
          "west",
          "what",
          "when",
          "whom",
          "wide",
          "wife",
          "wild",
          "will",
          "wind",
          "wine",
          "wing",
          "wire",
          "wise",
          "wish",
          "with",
          "wood",
          "word",
          "work",
          "yard",
          "year",
          "your",
          "zero",
          "zone",
        ];

        // GAME TYPE VARIABLES
        let wordLength = 4;
        let noOfTries = 5;

        const gameData = {
          grid: [],
          correctWord:
            dictionary[Math.floor(Math.random() * dictionary.length)],
          currentRow: 0,
          currentCol: 0,
        };

        function displayCell(div, row, column, letter = "") {
          const cell = document.createElement("div");
          cell.className = "cell";
          cell.id = "cell" + row + column;
          cell.textContent = letter;

          div.appendChild(cell);
          return cell;
        }

        function displayGame(div) {
          const grid = document.createElement("div");
          grid.className = "grid4";

          for (let row = 0; row < noOfTries; row++) {
            for (let col = 0; col < wordLength; col++) {
              displayCell(grid, row, col);
            }
          }
          div.appendChild(grid);
        }

        function refresh() {
          for (let row = 0; row < noOfTries; row++) {
            for (let col = 0; col < wordLength; col++) {
              const cell = document.getElementById("cell" + row + col);
              cell.textContent = gameData.grid[row][col];
            }
          }
        }

        function keystrokes() {
          document.body.onkeydown = (event) => {
            const key = event.key;
            const letters = [
              "a",
              "b",
              "c",
              "d",
              "e",
              "f",
              "g",
              "h",
              "i",
              "j",
              "k",
              "l",
              "m",
              "n",
              "o",
              "p",
              "q",
              "r",
              "s",
              "t",
              "u",
              "v",
              "w",
              "x",
              "y",
              "z",
            ];
            if (letters.includes(key)) {
              if (gameData.currentCol !== wordLength) {
                gameData.grid[gameData.currentRow][gameData.currentCol] = key;
                gameData.currentCol++;
                refresh();
              }
            }

            if (key === "Enter") {
              if (gameData.currentCol === wordLength) {
                const word = getCurrentWord();
                if (dictionary.includes(word)) {
                  colorizeCells(word);
                  gameData.currentRow++;
                  gameData.currentCol = 0;
                  refresh();
                } else {
                  alert("Not a valid word");
                }
              }
            }

            if (key === "Backspace") {
              if (gameData.currentCol !== 0) {
                gameData.grid[gameData.currentRow][gameData.currentCol - 1] =
                  "";
                gameData.currentCol--;
                refresh();
              }
            }
          };
        }

        function getCurrentWord() {
          let word = "";
          for (let i = 0; i < wordLength; i++) {
            word += gameData.grid[gameData.currentRow][i];
          }
          return word;
        }

        function colorizeCells(word) {
          const row = gameData.currentRow;

          for (let col = 0; col < wordLength; col++) {
            const cell = document.getElementById("cell" + row + col);
            const letter = cell.textContent;

            setTimeout(() => {
              if (letter === gameData.correctWord[col]) {
                cell.classList.add("correct");
              } else if (gameData.correctWord.includes(letter)) {
                cell.classList.add("present");
              } else {
                cell.classList.add("absent");
              }
            }, (col + 1) * 250);
            cell.classList.add("animated");
            cell.style.animationDelay = `${(col * 500) / 2}ms`;
          }

          setTimeout(() => {
            winHandler(word);
          }, 2000);
        }

        function winHandler(word) {
          if (gameData.correctWord === word) {
            const gameDiv = document.getElementById("wordle");
            gameDiv.innerHTML = `
        <div style="font-size:large">
            <img src="../assets/congrats.png" width="500px"><br><br>
            <p>The word was <span class="correctword">${gameData.correctWord}</span></p>
            <p>You guessed it in ${gameData.currentRow} tries</p>
            <a href="play${wordLength}" class="btn btn-secondary mt-auto">Play Again</a>
            <br><br>
            <a href="../index.html" class="btn btn-secondary mt-auto">Main Menu</a>
        </div>
        `;
          } else if (gameData.currentRow === noOfTries) {
            const gameDiv = document.getElementById("wordle");
            gameDiv.innerHTML = `
        <div style="font-size:large">
            <img src="../assets/nicetry.png" width="400px"><br><br>
            <p>The Word was <span class="correctword">${gameData.correctWord}</span></p>
            <a href="play${wordLength}.html" class="btn btn-secondary mt-auto">Try Again</a>
            <br><br>
            <a href="../index.html" class="btn btn-secondary mt-auto">Main Menu</a>
        </div>
        `;
          }
        }

        function startGame() {
          const game = document.getElementById("wordle");

          while (gameData.correctWord.length != wordLength) {
            gameData.correctWord =
              dictionary[Math.floor(Math.random() * dictionary.length)];
          }
          displayGame(game);
          for (let i = 0; i < noOfTries; i++) {
            gameData.grid.push(["", "", "", ""]);
          }

          keystrokes();
          console.log("For Testing purposes only");
          console.log("The correct word is: " + gameData.correctWord);
        }

        startGame();
      </script>
    </main>
  </body>
</html>
